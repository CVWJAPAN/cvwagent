<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>みんなの居場所おあがり - ARコンテンツ</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image-aframe.prod.js"></script>
    <style>
        body { margin: 0; padding: 20px; text-align: center }
        #hub-container { max-width: 600px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 10px }
        #ar-section { margin: 30px auto; max-width: 600px; background: #fff; padding: 20px }
        a-scene { width: 100%; height: 300px; max-height: 300px; overflow: hidden }
        input, select { width: 90%; padding: 8px; margin: 5px }
    </style>
</head>
<body>
<div id="hub-container">
    <h1>みんなの居場所おあがり</h1>
    <h2>寄付状況（目標: 50,000,000円）</h2>
    <div id="donation-counter">
        <p>寄付総額: <span id="donation-total">0</span> 円</p>
        <button onclick="addDonation(500)">500円</button>
        <button onclick="addDonation(1000)">1000円</button>
    </div>
    <h2>食料支援依頼</h2>
    <form id="support-form" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
        <input name="content" placeholder="支援内容（例: 米5kg)">
        <select name="allergy">
            <option value="none">アレルギーなし</option>
            <option value="egg">卵</option>
            <option value="milk">乳製品</option>
        </select>
        <input name="address" placeholder="住所">
        <button type="submit">依頼</button>
    </form>
    <h2>ARでメニュー確認</h2>
    <div id="ar-section">
        <p>カスタムマーカーで確認（<a href="./custom-marker.png">PNG</a>を印刷してください）</p>
        <a-scene mindar-image="imageTargetSrc: ./custom-marker.patt; maxTrack: 1;" embedded>
            <a-assets>
                <img id="custom" src="./custom-marker.png" />
            </a-assets>
            <a-entity mindar-image-target="targetIndex: 0">
                <a-text value="メニュー: 米5kg\nアレルギー: 卵不使用" color="white" position="0 0.5 0" scale="1 1 1" align="center"></a-text>
                <a-box position="0 0.5 -0.5" rotation="0 45 0" color="#4CC3D9" scale="0.5 0.5 0.5"></a-box>
                <a-cylinder position="0.5 0.5 -0.5" radius="0.2" height="0.5" color="#FF6347"></a-cylinder>
            </a-entity>
            <a-entity camera></a-entity>
        </a-scene>
    </div>
</div>
<script>
    function addDonation(amount) {
        let total = parseInt(document.getElementById("donation-total").innerText) || 0;
        total += amount;
        document.getElementById("donation-total").innerText = total;
    }
    document.getElementById("support-form").addEventListener("submit", function(e) {
        e.preventDefault();
        fetch(this.action, { method: "POST", body: new FormData(this) }).then(r => alert("送信完了"));
    });
</script>
</body>
</html>
